ch.15 安全評估與測試
```
安全測試  定期手動檢測控制措施是否正常、頻繁自動測試、配合外部滲透測試、風險優先級方法、人工解讀判斷
-測試資源可用性、待測控制措施保護程式的重要性、所含信息敏感性、出現技術故障和危及安全性錯誤配置可能性、
-受攻擊風險、控制措施配置變更頻率、技術環境下可能影響措施性能的其他變更、展開測試難度和時間、對正常業務營運造成影響

安全評估 安全性全面性檢查、評估期間識別可能造成安全漏洞提出修補建議
-NIST SP 800-53A::1.規範稽核系統相關文件 2.機制:滿足規範的控制措施(軟硬件) 3.活動:所採取的行動(備份、帳戶logs)4.人員:執行規範機制和活動
安全稽核   控制措施的有效性跟潛在利益衝突、防止、限制、檢測未經授權訪問跟控制措施脆弱性
>>>  系統邊界、AAA、加密敏感數據、稽核、監測系統活動控制措施
>>> 稽核員通常可以全權訪問組織所有訊息
-內部稽核  完全獨立所有的評估，直向總裁,CEO,董事報告
-外部稽核  沒有利益衝突，很高公信力
-第三方稽核   AICPA美國註冊會計師協會、
(SSAE18+ISAE3402)服務組織控劑SOC稽核、只要一次第三方稽核評估共享最終評估報告
>SOC1   可能影響財務報告準確性的組織控制措施
>SOC2  組織控制措施影響儲存信息的CIA和隱私，結果是保密(保密協議內範圍)
>SOC3  組織控制措施影響儲存信息的CIA和隱私，稽核結果公開紕漏
>> I 類  (文審)特定時間點設及管理提供描述和控制措施適用性
>> II類  措施運行的有效性涵蓋更長一段時間、現場驗證控制功能是否正常。

-稽核標準  
->COBIT 信息相關技術控制目標，ISACA維護框架、稽核和評估通用框架
->ISO27002  建立信息安全管理系統標準方法，控制措施細節
```
漏洞評估
```
漏洞描述 NIST SCAP|安全社區內容自動化協議
=CVE  |通用漏洞紕漏    ::安全漏洞命名系統
=CVSS |通用漏洞評分系統::安全漏洞嚴重性邊準話評分系統
=CCE  |通用配置枚舉    ::配置問題命名系統
=CPE  |通用平台枚舉    ::操作系統、應用程序、設備的命名系統
=XCCDF|可擴展配置檢查表描述格式 ::安全檢查表的語言
=OVAL |開放漏洞評估語言 ::安全測試過程的語言

漏洞掃描   開放網路端口
＊＊
>TCP SYN   丟SYN回應SYN+ACK代表端口是開啟，半開放掃描
>TCP coonet 向遠端系統的端口全連接、沒運行半開放掃描所需權限
>TCP ACK    表明是個開方連接，可嘗試FW規則或方法
>UDP  檢查存活的UDP服務
>Xmas 發送設置FIN PSH URD標誌位的數據包
>常規漏洞掃描無法檢測零日漏洞
>身分認證式掃描是有效、精準度高、減少漏報和誤報
|FTP 20/21|NTP 123|Telnet 23|
|SMTP 25|DNS 53|HTTP 80|

|SSH 22|POP3 110|HTTPS443|LPR/LPD515|

|MSSQL 1433/1434|windowsFileShare|135,137,138,139,445|
|Oracle 1521|H.323(SIP) 1720|PPTP 1723|
|RDP 3389| HPprint 9100|

>Web應用程序漏洞掃描  已知漏洞工具
>> 初次掃描所有應用程式檢測遺留WEB問題、把一份更新到生產環境執行Web應用程序掃描>>變更部屬到生產環境 針對掃描修改過的應用程式
>>>定期掃描所有應用程序或試用優先即安排掃描任務、PCIDSS至少每年一次執行
>數據庫漏洞掃描 sqlmap, web應用會提供這接數據庫入口、攻擊有機會直接攻擊
>漏洞管理工作流程
>>檢測：識別漏洞結果、驗證：驗證漏洞是否誤判、修復：採用供應商提供補丁修改配置規避漏洞折衷方式、安裝WAF
>>根據嚴重性、利用可能性、修復可能性決定漏洞修補順序

>滲透測試  嘗試突破安全控制入侵目標驗證漏洞存在、結合不同工具技術獲取訪問權限
>避免可能中斷系統訪問或損害資料儲存數據、需要高層充分的授權、OWASP Web, OSSTMM, NIST800-115,FedRAMP,＊PCIDSS補充信息
>>規劃階段：範圍和規則並達成共識跟經過授權、收集和發現階段：利用工具收集環境信息和系統功能、識別系統開放的端口
>>攻擊階段：利用漏洞利用工具來破壞系統安全、報告階段：總結測試結果跟提出安全建議
->白盒滲透測試：提供相係信息、縮短攻擊時間提升發現漏洞可能性
->灰盒滲透測試：部分知識測試、但由於成本和時間受限通常使用這種測試方式
->黑盒滲透測試：不給任何信息模擬外部攻擊者、試圖獲取有關業務和技術環境
>入侵模擬攻擊BAS 自動化滲透、將威脅只表注入系統和網路觸發其他安全控制是立即檢測阻止、缺陷可能表明組織需要更新或增強控制措施

合規檢查
-滿足目標明確的安全控制措施、安全測試和評估規劃重要組成、監管要求定期執行合規性檢查、確保正常運轉
```
測試軟件
```
擁有資源訪問特權、處理敏感信息、依賴儲存信息的數據庫、關鍵業務功能故障對業務嚴重破壞

代碼審查code review==peer review同行評審 決定允許移植到生產環境、
-六步驟：規劃、總攬、準備、審查、返工、追蹤
-同行評審：在會議上一起走查代碼、高級開發人員手動檢查跟簽署、用自動化工具檢測常見應用缺陷
-SAST  靜態應用程序安全檢測：再不運行狀態下、通過分析源代碼或編譯後評估軟件安全性的自動化工具、用於設計、建構、測試
-DAST  動態應用程序安全檢測：運行環境下檢測安全性、常用於他人開發軟件因無法接觸底層源代碼、要避免服務意外中斷、模擬業務輸出和預期比對
-IAST  交互式應用程序安全測是：運行時行為和性能、流量框架組建和後台連結實時分析
-RASP  運行時應用程序自我保護：攔阻應用程序的調用並驗證數據請求

道德披露 發現未知漏洞、盡可能實施補償控制措施或開發商補丁、漏洞提供者應預留合理時間來修復在做公開披露

-模糊測試  特殊動態測試技術、不同類型輸入測試、向軟件提供無效輸入、隨機產生、特殊構造輸入、監察是否崩潰、緩衝溢出或不可預知結果
>>突變模糊測試mutation dumb 實際操作獲取輸入值、改變輸入值生成模糊輸入、尾部追加字符串或執行其他數據操作方法
>>預生成智能模糊測試  設計模型基於對軟件所有數據類型理解創建新的模糊輸入,僅限測試不複雜業務邏輯的簡單漏洞、助於執行測試覆蓋率分析
--->>>zzuf自動化生成模糊數值測試、與原文擋幾乎一樣只是多一些變化干擾程序原本期望值、又稱反比特反轉bit flipping

接口測試  獨立開發模塊需定義清晰街口進行交互、接口測試是評估性能
-API應用編程街口 代碼模塊間交互提供統一方法、並以Web服務形式向外發布、開發人員對API進行測試為了確保所有安全要求
＊＊
-UI用戶介面 包括GUI圖形介面和命令行介面、UI為終端提供與軟件交互能力、審查所有介面及用戶介面是否正常工作
-物理接口  操作機械或邏輯控制器或其他物理設備應用程序、避免物理接口失效導致潛在危害
誤用案例測試或濫用案例的過程評估軟件是否存在已知風險相關漏洞測試應用程序．

測試覆蓋率分析：測試不可能覆蓋軟件的所有部分：： 測試覆蓋率=已測用例數量/全部用例數量
-節獨測試結果需要理解生成輸入值過程、公式可適用不同標準
>分支覆蓋率  所有的if,else條件服否都執行每個if
>條件覆蓋率  所有輸入集合是否測試每個代碼邏輯
>函數覆蓋率  是否已調用代碼每個函數並返回結果
>循環覆蓋率  導致代碼執行數次條件下、是否執行代碼每一個循環
>語句覆蓋率  是否執行所有代碼

網站監測  性能管理、著障排除、潛在安全識別活動、解決用戶識別出來的問題
-被動監測  不或和分析發送到網站實際流量、了解真實發生事情
-->>RUM real user monitoring真實用戶監控：監測工具重新組裝單個用戶活動、追蹤其與網站交互
-綜合監測  像網站發起偽造的事物活動、評估網站性能、指向站點請求一個頁面的計算響應時間或測試腳本確認事務活動結果
```
實施安全管理流程
```
日誌審查
-SIEM安全信息和事件管理工具包、使大量日誌自動化審查的常規工作、SIEM工具包利用設備、操作系統敢應用程序提供syslog功能收集信息
-日誌系統應利用NTP確保SIEM發送的日誌紀錄是否時間同步一致時間軸、管理者應定期日誌審查、特別是敏感功能確保特權用不會濫用及侵犯用戶隱私

帳戶管理  僅保留被授予權限且未發生未授權修改的特權帳號
-特權用戶及特殊權限列表並監測管理員避免竄改、要求特權批審機構提供特權用戶及特殊權限列表、對這兩張清單做比對只有經授權用戶對系統訪問權限請不超過其授權
-抽樣在隨機情況才有效、避免錯過可能錯誤的整個帳戶類別、提示管理展開審查維護帳戶文檔並提供審計追蹤表明稽核完成

DR&BC  用災害恢復補充連續性控制措施的重要性、定期備份監察、流程可有效運行滿足數據保護需求、審查日誌、哈希值或請求系統實際恢復

培訓和意識   當前威脅、保護信息和系統抵禦攻擊
-根據角色量身定制、應履行安全職責所需具體、可操作信息、模擬虛假網頁釣魚手法
-

持續鑑測關鍵績效和風險指標、定期查看
-遺留漏洞數量、修復漏洞耗時、漏洞缺陷重線、被盜用帳戶數量、部署前掃瞄檢測軟件缺陷數量、重覆審計結果、嘗試訪問已知惡意站點用戶

```
